/armor_detector:
  ros__parameters:
  # Detector params.
    max_delta_t: 5
    max_lost_cnt: 5
    max_armors_cnt: 8
    hero_danger_zone: 4
    armor_type_wh_thres: 3
    no_crop_thres: 0.01
    no_crop_ratio: 0.002
    full_crop_ratio: 0.0001
    armor_roi_expand_ratio_width: 1.2
    armor_roi_expand_ratio_height: 1.8
    armor_conf_high_thres: 0.82

  # Spinning params.
    shoot_delay: 140.0
    bullet_speed: 28.0
    max_dead_buffer: 10
    max_delta_dist: 0.5
    switch_max_dt: 2000.0
    anti_spin_max_r_multiple: 4.5
    anti_spin_judge_low_thres: 2000.0
    anti_spin_judge_high_thres: 20000.0
    
    delta_x_3d_high_thresh: 0.18
    delta_x_3d_higher_thresh: 0.25
    delta_x_3d_low_thresh: 0.10
    delta_x_3d_lower_thresh: 0.05
    delta_y_3d_high_thresh: 0.18
    delta_y_3d_higher_thresh: 0.25
    delta_y_3d_low_thresh: 0.10
    delta_y_3d_lower_thresh: 0.05

  # Camera intrinsic params path.
    camera_param_path: '/config/camera.yaml'

  # Network model path.
    # network_path: "/model/opt-0527-002.xml"
    # network_path: "/model/1106-333.xml"
    # network_path: "/model/yolox.xml"
    # network_path: "/model/opt-1208-001.xml"
    network_path: "/model/vgg_640.onnx"

  # Data saving.
    save_data: false
    save_path: "/data/infer.txt"
    save_dataset: false
  
  # Debug params.
    enemy_red: false # red: true / blue: false
    use_roi: true
    debug: true

    show_img: true
    show_crop_img: false
    show_fps: false
    show_aim_cross: true
    show_all_armors: true
    auto_label: false
    print_latency: false
    sync_transport: false
    print_target_info: false

/armor_processor:        
  ros__parameters:
  # Predict params.
    bullet_speed: 28.0
    max_dt: 1000
    max_cost: 10
    window_size: 3
    min_fitting_lens: 5
    shoot_delay: 140.0
    delay_coeff: 0.8
    window_size: 3
    max_offset_value: 0.45
    reserve_factor: 500.0 # 储备系数(>=1)

  # Debug params.
    debug: true
    show_img: false
    draw_predict_curve: true
    show_predict: true
    show_aim_cross: true
    show_fps: true
    print_delay: false
    sync_transport: false
    show_marker: true
 
  # Camera intrinsic params path.
    camera_param_path: '/config/camera.yaml'

  # Filter params.
    filter_param_path: "/config/filter_param.yaml"
  
  # uniform model
    #----------------------------------Xc------Yc----Zc-----r---theta--omega
    uniform_ekf_process_noise_param: [0.01, 0.0001, 0.002, 0.0005, 0.002, 0.001]
    #----------------------------------X----Y---Z---theta
    uniform_ekf_measure_noise_param: [5.0, 1.0, 1.0, 1.0]
    
  # Singer model
    # alpha:机动频率(alpha_x/alpha_y/alpha_z) sigma:机动加速度标准差(sigma_x/sigma_y/sigma_z)
    singer_model_process_param: [1.01, 1.01, 1.01, 5.0, 4.0, 5.0]
    # r:观测协方差系数(r1/r2/r3)
    singer_model_measure_param: [1.0, 1.0, 1.0]

    # IMM model.
    #状态转移概率
    trans_prob_matrix: [0.6, 0.3, 0.05, 0.05, #row prob sum = 1
                        0.5, 0.4, 0.05, 0.05,
                        0.1, 0.1, 0.75, 0.05,
                        0.1, 0.1, 0.05, 0.75]
    #模型概率
    model_prob_vector: [0.4, 0.3, 0.15, 0.15] #prob sum = 1
    process_noise: [0.4, 0.4, 0.3, 0.3, 0.2, 0.2]
    measure_noise: [60.0, 60.0, 30.0, 30.0]