/armor_detector:
  ros__parameters:
  # Detector params.
    armor_type_wh_thres: 3
    max_lost_cnt: 5
    max_armors_cnt: 8
    max_v: 8
    max_delta_t: 50
    no_crop_thres: 0.01
    hero_danger_zone: 4
    color: true # red: true
                # blue: false
    no_crop_ratio: 0.002
    full_crop_ratio: 0.0001
    armor_roi_expand_ratio_width: 1.2
    armor_roi_expand_ratio_height: 1.8
    armor_roi_expand_ratio_width: 1.2
    armor_roi_expand_ratio_height: 1.8
    armor_conf_high_thres: 0.82
    yaw_angle_offset: -0.5
    pitch_angle_offset: 0.5

  # Spinning params.
    max_cost: 500
    shoot_delay: 50
    bullet_speed: 16.0
    max_dead_buffer: 10
    max_delta_dist: 0.5
    min_fitting_lens: 10
    switch_max_dt: 2000.0
    anti_spin_max_r_multiple: 4.5
    anti_spin_judge_low_thres: 2000.0
    anti_spin_judge_high_thres: 20000.0
    
    delta_x_3d_high_thresh: 0.18
    delta_x_3d_higher_thresh: 0.25
    delta_x_3d_low_thresh: 0.10
    delta_x_3d_lower_thresh: 0.05
    delta_y_3d_high_thresh: 0.18
    delta_y_3d_higher_thresh: 0.25
    delta_y_3d_low_thresh: 0.10
    delta_y_3d_lower_thresh: 0.05

  # Camera config params.
    # camera_name: "00J90630561" 
    camera_name: "KE0200110075" #FIXME:根据相机序列号修改
    camera_type: 0
    camera_param_path: "/config/camera.yaml"

  # Network model path.
    # network_path: "/model/opt-0127-001.xml"
    # network_path: "/model/opt-0527-002.xml"
    # network_path: "/model/1106-333.xml"
    # network_path: "/model/yolox.xml"
    # network_path: "/model/opt-1208-001.xml"
    network_path: "/model/opt-0127-001.xml"
  
  # Data saving.
    save_data: false
    save_path: "/data/infer.txt"
    save_dataset: false
  
  # Debug params.
    debug: true
    using_imu: false
    show_img: false
    show_fps: false
    using_roi: false
    detect_red: true
    auto_label: false
    print_letency: false
    show_aim_cross: true
    sync_transport: false
    show_all_armors: true
    print_target_info: false

/armor_processor:
  ros__parameters:
  # Predict params.
    bullet_speed: 16.0
    max_time_delta: 1000
    max_cost: 10
    max_v: 8
    min_fitting_lens: 5
    shoot_delay: 670
    window_size: 3
    yaw_angle_offset: -0.5
    pitch_angle_offset: 0.5
    max_offset_value: 0.45
    reserve_factor: 500.0 #储备系数(>=1)
    # rotation_yaw: 0.0
    # rotation_pitch: 0.0
    # rotation_roll: 0.0

  # Debug params.
    debug: true
    using_imu: false
    show_img: true
    draw_predict: false
    show_predict: true
    sync_transport: false
    print_delay: false
    x_axis_filter: true
    y_axis_filter: true
    z_axis_filter: true
    # disable_filter: true
    # disable_fitting: false
    show_aim_cross: true
    show_fps: false

  # Camera params.
    camera_type: 0 #(daheng: 0 / hik: 1 / mvs: 2 / usb: 3)
    # coord_param_name: "00J90630561" 
    coord_param_name: "KE0200110075" #FIXME:根据相机序列号修改
    coord_param_path: "/config/camera.yaml"
    
  # Filter params.
    filter_param_path: "/config/filter_param.yaml"

  # Singer model(--->CS Model).
    # (alpha:机动频率 a_max:加速度上限 p_max:最大值概率 p0:非机动概率 dt:采样时间间隔 
    #  sigma:机动加速度标准差 p:过程协方差系数 r:观测协方差系数 coeff:预测提前量系数)
    # singer_model_x_axis: [1.05, 5.0, 0.2, 0.2, 0.275, 1.05, 1.0, 1.0, 2.0] 
    # singer_model_y_axis: [1.18, 5.0, 0.2, 0.2, 0.190, 1.15, 1.0, 1.0, 0.1] 
    # singer_model_z_axis: [1.25, 5.0, 0.1, 0.9, 0.200, 1.2, 1.0, 1.0, 0.1]

    # singer_model_x_axis: [1.0, 10.0, 0.1, 0.8, 0.30, 2.50, 0.25, 1.0, 0.1] 
    # singer_model_y_axis: [1.18, 10.0, 0.1, 0.8, 0.18, 0.5, 1.0, 1.0, 5.0] 
    # singer_model_z_axis: [1.25, 10.0, 0.1, 0.8, 0.170, 0.5, 1.0, 1.0, 5.0]

    # singer_model_x_axis: [1.00, 10.0, 0.1, 0.8, 0.24, 2.60, 1.0, 1.0, 0.1] 
    # singer_model_y_axis: [1.12, 10.0, 0.1, 0.8, 0.18, 1.85, 1.0, 1.0, 0.1] 
    # singer_model_z_axis: [1.25, 10.0, 0.1, 0.8, 0.20, 1.2, 1.0, 1.0, 0.1]

    # singer_model_x_axis: [1.00, 10.0, 0.1, 0.8, 0.22, 2.80, 1.0, 1.0, 0.1] 
    # singer_model_y_axis: [1.12, 10.0, 0.1, 0.8, 0.17, 1.90, 1.0, 1.0, 0.1] 
    # singer_model_z_axis: [1.25, 10.0, 0.1, 0.8, 0.20, 1.2, 1.0, 1.0, 0.1]

    # singer_model_x_axis: [1.00, 10.0, 0.1, 0.8, 0.215, 2.85, 1.0, 1.0, 0.1] 
    # singer_model_y_axis: [1.12, 10.0, 0.1, 0.8, 0.165, 1.95, 1.0, 1.0, 0.1] 
    # singer_model_z_axis: [1.25, 10.0, 0.1, 0.8, 0.20, 1.2, 1.0, 1.0, 0.1]

    singer_model_x_axis: [20.0, 10.0, 0.1, 0.8, 5.00, 0.0025, 1.0, 1.0, 1.0] 
    singer_model_y_axis: [1.12, 10.0, 0.1, 0.8, 0.18, 1.85, 1.0, 1.0, 0.1] 
    singer_model_z_axis: [8.00, 10.0, 0.1, 0.8, 5.00, 0.0030, 1.0, 1.0, 7.0]

    gyro_singer_model_x_axis: [20.0, 10.0, 0.1, 0.8, 5.00, 0.0025, 1.0, 1.0, 1.0]
    gyro_singer_model_y_axis: [1.12, 10.0, 0.1, 0.8, 0.18, 1.85, 1.0, 1.0, 0.1]
    gyro_singer_model_z_axis: [8.00, 10.0, 0.1, 0.8, 5.00, 0.0030, 1.0, 1.0, 7.0]

    # singer_model_x_axis: [1.0, 10.0, 0.1, 0.8, 5.00, 0.1, 1.0, 1.0, 1.0] 
    # singer_model_y_axis: [5.0, 10.0, 0.1, 0.8, 16.00, 0.001, 1.0, 0.2, 4.0] 
    # singer_model_z_axis: [5.0, 10.0, 0.1, 0.8, 16.00, 0.0008, 1.0, 0.2, 4.0]

  # IMM model.
    #状态转移概率
    trans_prob_matrix: [0.6, 0.3, 0.05, 0.05, #row prob sum = 1
                        0.5, 0.4, 0.05, 0.05,
                        0.1, 0.1, 0.75, 0.05,
                        0.1, 0.1, 0.05, 0.75]
    #模型概率
    model_prob_vector: [0.4, 0.3, 0.15, 0.15] #prob sum = 1
    process_noise: [0.4, 0.4, 0.3, 0.3, 0.2, 0.2]
    measure_noise: [60.0, 60.0, 30.0, 30.0]
